(function(t){function e(e){for(var o,i,c=e[0],r=e[1],l=e[2],f=0,d=[];f<c.length;f++)i=c[f],s[i]&&d.push(s[i][0]),s[i]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,c=1;c<n.length;c++){var r=n[c];0!==s[r]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},s={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("64a9"),s=n.n(o);s.a},"26f0":function(t,e,n){"use strict";var o=n("5db0"),s=n.n(o);s.a},"2aac":function(t,e,n){},"2e03":function(t,e,n){"use strict";var o=n("443a"),s=n.n(o);s.a},"443a":function(t,e,n){},"49e6":function(t,e,n){"use strict";var o=n("2aac"),s=n.n(o);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={name:"app",components:{}},c=i,r=(n("034f"),n("2877")),l=Object(r["a"])(c,s,a,!1,null,null,null),u=l.exports,f=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"dialog-content",attrs:{slot:"content"},slot:"content"},[n("el-dialog",{attrs:{title:"个人信息",visible:t.dialogFormVisible,width:"80%",center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("div",{staticStyle:{"text-align":"center"}},[n("el-form",{attrs:{model:t.form,size:"mini"}},[n("el-form-item",[n("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[n("el-option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),n("el-option",{attrs:{label:"男",value:"男"}}),n("el-option",{attrs:{label:"女",value:"女"}})],1)],1),n("el-form-item",[n("el-select",{attrs:{placeholder:"请选择年龄"},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}},[n("el-option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),t._l(100,function(t){return n("el-option",{key:t,attrs:{value:t}})})],2)],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("保 存")])],1)])],1),n("div",{staticClass:"btn",on:{click:t.toChat}},[n("switch-btn")],1)])},m=[],h=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"switch"},[n("input",{attrs:{type:"checkbox",name:"toggle"}}),n("label",{attrs:{for:"toggle"}},[n("i",[t._v("匹配")])]),n("span")])}],g={},v=g,b=(n("c14e"),Object(r["a"])(v,h,p,!1,null,"573c77e7",null)),x=b.exports,k={name:"index",mounted:function(){},data:function(){return{connectState:!1,mu:null,dialogFormVisible:!0,form:{sex:"男",age:18}}},sockets:{connect:function(){this.$socket.emit("matche")},repeatConnection:function(){this.$socket.close()},disconnect:function(){},matche:function(t){t=JSON.parse(t),t.success&&(localStorage.setItem("userInfo",JSON.stringify(t.info)),this.$router.push("chat"))}},components:{SwitchBtn:x},methods:{toChat:function(){var t=this;this.$finger(function(e){window.console.log(e),localStorage.setItem("age",t.form.age),localStorage.setItem("sex",t.form.sex),t.$socket.io.opts.query={token:e,sex:localStorage.getItem("sex"),age:localStorage.getItem("age")},t.$socket.connect()})}}},y=k,_=(n("26f0"),Object(r["a"])(y,d,m,!1,null,"95a5592a",null)),$=_.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"con"},[n("el-col",{staticClass:"title"},[n("tiltle")],1),n("el-col",{staticClass:"content"},[n("contents",{ref:"contents"})],1),n("el-col",{staticClass:"biu"},[n("emit",{on:{send:t.send}})],1)],1)},S=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"qbc",attrs:{type:"flex",align:"middle"}},[n("el-col",{staticClass:"contentss",attrs:{xs:5,sm:5,md:4,lg:2,xl:0}},[n("el-button",{attrs:{type:"text",icon:"el-icon-back"},on:{click:t.back}},[t._v("返回")])],1),n("el-col",{staticClass:"contentss",attrs:{xs:14,sm:14,md:16,lg:18,xl:24}},[n("el-row",[n("el-col",[t._v("闲聊")]),n("el-col",[t._v(t._s(t.userInfo.age)+"-"+t._s(t.userInfo.sex))])],1)],1),n("el-col",{staticClass:"contentss",attrs:{xs:5,sm:5,md:4,lg:2,xl:0}},[n("el-button",{attrs:{type:"text"},on:{click:t.disc}},[t._v(t._s(t.text))])],1)],1)},C=[],j={mounted:function(){this.$socket.connected?this.text="断开":this.text="匹配"},data:function(){return{connected:this.$socket.connected,text:"匹配",loading:{},userInfo:JSON.parse(localStorage.getItem("userInfo"))}},watch:{connected:function(t){t?(this.text="断开",this.loading.close()):this.text="匹配"}},sockets:{disc:function(){this.connected=!1,this.$message("对方断开了连接")},matche:function(t){t=JSON.parse(t),t.success&&(this.userInfo=t.info,this.connected=!0)}},methods:{disc:function(){var t=this;this.$socket.connected||this.$finger(function(e){t.$socket.io.opts.query={token:e,age:localStorage.getItem("age"),sex:localStorage.getItem("sex")},t.$socket.connect()}),this.connected?(this.$socket.emit("disc"),this.connected=!1):(this.$socket.emit("matche"),this.openFullScreen2())},openFullScreen2:function(){this.loading=this.$loading({lock:!0,text:"匹配中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},back:function(){this.$socket.close(),this.$router.push("/")}}},I=j,E=(n("49e6"),Object(r["a"])(I,O,C,!1,null,"3765fc76",null)),J=E.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll"}],ref:"inner",staticClass:"inner infinite-list"},[n("div",{ref:"das",staticClass:"das"},[n("ul",{staticStyle:{"list-style":"none",padding:"0 40px"}},t._l(t.datas,function(e,o){return n("li",{key:o,staticClass:"clearfloat"},[t._o(n("div",{class:t.bubble(o)},[t._v(t._s(e.message))]),0,o)])}),0)])])},F=[],M={data:function(){return{datas:[]}},sockets:{disc:function(){window.console.log("这是content")}},methods:{refreshData:function(t){this.datas.push(t)},bubble:function(t){return this.datas[t].me?"bubbleright":"bubbleleft"},mes:function(){return this.me=!this.me,this.me}},computed:{},watch:{},updated:function(){this.$refs.inner.scrollTop=this.$refs.das.clientHeight-this.$refs.inner.clientHeight+30}},P=M,T=(n("7f3a"),Object(r["a"])(P,N,F,!1,null,"03f8758a",null)),D=T.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"请输入内容",maxlength:"200","show-word-limit":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.send(e)}},model:{value:t.textarea3,callback:function(e){t.textarea3=e},expression:"textarea3"}})],1)},V=[],q={data:function(){return{textarea3:""}},sockets:{connect:function(){}},methods:{send:function(){this.$emit("send",{mime:0,message:this.textarea3,time:(new Date).getTime()}),this.textarea3=""}}},z=q,H=Object(r["a"])(z,K,V,!1,null,"3d52f797",null),R=H.exports,B={created:function(){},sockets:{connect:function(){},sendMsg:function(t){t=JSON.parse(t),this.$refs.contents.refreshData(t)}},methods:{send:function(t){var e={me:!0,message:t.message};this.$socket.emit("sendMsg",JSON.stringify(t)),this.$refs.contents.refreshData(e)},cc:function(){alert(6666)}},components:{Tiltle:J,Contents:D,Emit:R}},A=B,G=(n("2e03"),Object(r["a"])(A,w,S,!1,null,"32fa0e80",null)),L=G.exports;o["default"].use(f["a"]);var Q=new f["a"]({routes:[{path:"/",component:$,meta:{title:"gossip"}},{path:"/chat",component:L}]}),U=Q,W=n("5c96"),X=n.n(W),Y=(n("0fae"),n("487a")),Z=n.n(Y),tt=n("5132"),et=n.n(tt),nt=n("e813"),ot=n.n(nt);o["default"].use(X.a),o["default"].use(Z.a),o["default"].prototype.$finger=function(t){ot.a.get(function(e){var n=e.map(function(t){return t.value}),o=ot.a.x64hash128(n.join(""),31);t(o)})},U.beforeEach(function(t,e,n){t.meta.title&&(document.title=t.meta.title),n()}),o["default"].use(new et.a({debug:!1,connection:"http://localhost:3000",options:{reconnection:!0,autoConnect:!1}})),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(u)},router:U,data:{}}).$mount("#app")},"5db0":function(t,e,n){},"64a9":function(t,e,n){},"7f3a":function(t,e,n){"use strict";var o=n("ae11"),s=n.n(o);s.a},ae11:function(t,e,n){},c14e:function(t,e,n){"use strict";var o=n("d992"),s=n.n(o);s.a},d992:function(t,e,n){}});
//# sourceMappingURL=app.728ebeb0.js.map